---
title: "2023.03.31 TIL" #제목 영역
date: 2023-04-01 #업데이트 날짜/시간
categories: [TIL] #카테고리를 나눠줄 수 있음?! TIL, WIL, Project
tags: [TIL] #태그예시: TIL, WIL, Project
---

`회고`  
오늘은 같이 사무실에서 공부하던 친구가 집으로 돌아갔다  
주말까지는 온전히 집중할 수 있을것 같아서 최선을 다해보고자 한다 ㅠㅠ  
스프링 데이터 JPA만 봤었을때는 더 알고싶어서 학원까지 박차고 나왔던건데  
이제는 그만알고싶다 ㅋㅋㅋㅋ....

내용이 진짜진짜 방대하다  
그때는 JPQL같은건 또... `더 알고싶으면 공부하세요`였는데  
지금보니까 거의 필수아냐...

물론 데이터를 단순하게 조회 한 후 애플리케이션에서 골라서 출력하게 하긴 했는데,  
어떤 방법이 맞는지는 모르겠다 최대한 정제해서 가져올수 있을만큼 해야하는건가  
아니면 애플리케이션에서 처리해야하는건가...

회사를 가면 알게되겠지

<h5><strong>JPA 값타입</strong></h5>
이제는 정말정말 어려운것들만 나오고있어서   
하나의 섹션을 보는것만도 너무 벅차다...

내가 잘 이해하고 넘어가고 있는지도 잘 모르겠다 ㅠㅠ

JPA에서 값타입 기본값타입, 임베디드 타입, 컬렉션 값 타입으로 분류된다고 한다  
기본 값 타입은 우리가 잘 알고있는 자바가 제공하는 기본 타입이다  
int, double이나 Integer, Long, String등 더 세세한 분류를 할 수 있지만  
중요한건 임베디드 타입이다

임베디드 타입은 무엇이냐, 만약 사원의 정보를 저장한다고 가정할때  
사번, 이름, 근무시작일, 근무종료일, 주소 도시, 주소 번지, 주소 우편번호를 저장한다

이중 근무시작일과 근무 종료일은 한 그룹, 주소 도시, 번지, 우편번호를 한 그룹으로 생각할 수 있다  
값타입은 위와 같이 같은 그룹의 내용을 따로 묶어 클래스로 만들 수 있다

기존에는 아래와 같이 엔티티를 만들었다면

```java
private Long id;
private String name;
private LocalDateTime startDate;
private LocalDateTime endDate;
private String city;
private String street;
private String zipcode;
```

값타입으로는 startDate와 endDate를 Period라는 클래스로,  
주소 정보들은 Address라는 클래스로 따로 생성하여 해당 클래스를 값타입으로 가진다

```java
private Long id;
private String name;
private Period workPeriod;
private Address homeAddress;
```

위와같이 만들 수 있다  
물론 각각 Period에는 startDate, endDate를 갖고있고  
Address에는 city, street, zipcode를 갖고있음...

이렇게 할경우 전에 DB에서 각각 테이블로 변환하는 조인전략과 비슷하지않나? 생각하였다  
그런데 조인전략은 공통된 TABLE과 각 속성에 따른 카테고리 TABLE로 나뉘었지만

임베디드값타입은 테이블 생성시 한 테이블에 모두 들어간다  
그냥 값타입으로만 나뉜것 뿐이다  
이렇게 할 경우 다른 엔티티에서도 재사용 할 수 있고,  
또 값타입만 사용하는 의미있는 메서드를 만들어낼수도 있고 장점이 있다  
물론 난 아직 모른다..........

아 값타입 컬렉션도 있다  
얘는 더복잡하다........

값타입 컬렉션은 엄청 복잡하지만 그렇게 추천하는 방법은 아니고, 의미가 크지 않은 데이터를 저장하는데 사용하라고 하였다  
예를들면 내가 좋아하는 음식을 다중선택하여 DB로 저장할때

FK와 함께, favoritFood 라는 테이블에 저장된다  
문제는 얘들이 id값을 갖지 않는다는거다........  
DB에서 알아서 생성해주는 중간테이블 같은거라 각각의 고유의 ID를 갖고있지않다  
때문에 데이터를 조회하거나 값을 변경한다거나 하려면 굉장히 불편하고 효율적이지도 않고 복잡하다  
때문에 값타입 컬렉션은 그냥 일대다 관계를 고려하는게 낫다  
....

제대로 이해를 하고있는지 모르겠는데 값타입 진짜 너무 복잡하다  
언제나 그랬지만 결론은 사용하지마세요 였다 ㅠㅠㅠㅠ

심지어 값타입은 값을 공유하고있기 때문에 MEMBER1에서 값타입의 내용을 수정하면 MEMBER2에도 반영된다  
....때문에 값을 복제해서 사용해야한다는 불편한 단점도 있다  
그리고 실수로 값을 변경하는것을 방지해 불변객체로 만들어야한다

결론은 사용하지마....

---

알고 안쓰는것과 몰라서 못쓰는것은 엄연히 다르지만  
강의를 수강하는 내내 결국은 쓰지마세요여서 너무 혼란스럽네 ㅠㅠㅠ

언제 한번 제가 이거를 다시 들춰볼날이 있는걸까요?????ㅠㅠ  
이제 두개섹션밖에 안남았는데 JPQL이다 정말 너무 듣기싫다....

지금 계속 이론만 주구장창 들으니까 점점 자신감도 떨어져간다ㅠㅠ 더이상 무슨말인지 모르겠어용....  
시간을 들여서라도 로드맵을 따라갔어야했나 싶지만 이제와서 뭐 무슨 소용이있겠어.....  
섹션은 두개밖에 안남았는데 노력해야지

`마무리`  
한 섹션씩 듣는것도 너무 시간을 많이 잡아먹는다  
내가 기초지식이 없어서 그런지 이해하는데도 너무 오래걸리구...

이게 맞나 싶고...  
내가 프로젝트를 할 수 있을까 싶고...  
이직할수있을까 싶다

나는 항상 뭘 하든 잘 해내어서 나름의 인정을 받아왔었고 항상 잘했다  
근데 개발은 진짜 너무 어렵다 ㅠㅠ  
점점 배워나가야 하는 분야이기 때문에 내가 처음부터 잘할수 없는거라 더 겁난다  
항상 부딪쳐보면 별거 아니지만  
커뮤니티에서 신입으로 들어가신분들의 얘기만 들어도 내가 해낼수있을까 싶다  
그렇다고 포기할순없지만 걱정은 항상 되네 ㅠㅠ  
얼른 실전 들어가고싶다...
