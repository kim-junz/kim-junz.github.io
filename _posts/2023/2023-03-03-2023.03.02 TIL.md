---
title: "2023.03.02 TIL" #제목 영역
date: 2023-03-03 #업데이트 날짜/시간
categories: [TIL] #카테고리를 나눠줄 수 있음?! TIL, WIL, Project
tags: [TIL, 항해99] #태그예시: TIL, WIL, Project
---

`회고`
하루종일 과제에 매달렸었다.
CRUD를 제대로 구현하고싶었는데 내가 아직 부족한부분이 많아 프론트에서 동적URL을 생성하는데 많이 애를 먹었다
그래서 수정까지 어떻게 구현을 하였지만 시간이 너무 없어서,
매니저님의 권유로 프론트를 포기하였다.

일단은 기능을 모두 구현하고, 포스트맨에서 기능을 테스트 할 수 있을 정도로만 만들기로 하였다.
그러기위해서는 고쳐야 할 부분이 많았다

<h5><strong>비밀번호 체크</strong></h5>
프론트 화면으로 구성하려고 할때, 
나는 당연히 수정을 위해서는 비밀번호 체크 > 비밀번호가 일치할경우 수정화면으로 이동 > 수정
이런 루트로 생각하였다.

그래서 해당 글의 id를 갖고있는 비밀번호를 확인 check 화면으로 이동시켰고,
여기에서 비밀번호를 받아와서 일치할경우 true, 일치하지 않을경우 false를 반환하는곳까지 구현하였는데..ㅠㅠ

이제 화면을 없애고 postman으로 기능만 구현해서 만들으려고 하니 조금 답답했다 내가 생각한 로직이 아니어서 그런가
그런데 이런 기획자같은 마음은 버리고;;;; 일단은 배우는 입장이니 과제에서 설명하는 기능에 충실하기로 하였다.

먼저 페이지를 따로 나눠놨던 수정과 비밀번호 체크 페이지를 합쳤다.
이제 비밀번호만 따로 체크하여 수정화면으로 넘겨주는부분이 사라졌기때문에,
일단 수정을 하는데, 비밀번호를 입력하고 해당 입력된 비밀번호가 기존에 등록되어있는 비밀번호와 다를경우 `수정실패`를 반환하도록 하였다

`service`

```java
    @Transactional
    public String update(Long id, BlogRequestDto requestDto) {
        BlogList blogList = blogListRepository.findById(id).orElseThrow(
                () -> new IllegalArgumentException("수정 실패! 삭제된 포스트입니다")
        );
        String pass = requestDto.getPassword();
       if (blogList.getPassword().equals(pass)){
            blogList.update(requestDto);
            return "수정 완료!";
        } else {
            return "비밀번호가 틀립니다";
        }
    }
```

서비스에서 update 메서드는 Long타입의 id와 입력받아온 값을 매개변수로 하고있다.
먼저 해당 id가 DB에 없는 경우 예외값을 반환하도록 처리하였고,

String 타입 pass에다가 받아온 데이터값중 password만 가져와서 넣었다.
그리고 if문을 통해 기존 등록된 password값과 pass값이 같은지 비교하였고,
같을경우 해당 DB를 업데이트 하고 "수정완료!"를 반환,

틀릴경우 "비밀번호가 틀립니다" 를 반환하도록 하였다.

앗 그런데 문제 발생 ㅠㅠ POSTMAN에서 분명 수정완료가 반환됨에도 불구하고 수정된 데이터가 들어가지 않았다.

그래서 잘못된 데이터를 받아가는지 entity에서 값을 찍어보기로하였다

`entity`

```java
    @Transactional
    public String update(BlogRequestDto requestDto){
        this.userName = requestDto.getUserName();
        this.title = requestDto.getTitle();
        this.contents = requestDto.getContents();
        this.password = requestDto.getPassword();
        return userName+"/"+title+"/"+contents+"/"+password;
    }
```

위 메서드가 변경된 값을 저장하는 update 메서드 부분인데, this변수들에 어떤값이 찍혀있는지 String타입으로 반환하도록 잠시 수정 후
확인해 보았으나, 수정된 값을 반환하였다 ㅠㅠ 그럼 내가 DB 형태를 잘못입력한것도 아닌데 왜그럴까...

이부분에 관해서 6시간동안..! 찾아봤고 팀원들한테 코드도 보여줬는데 결국 원인을 찾지못하였다
하.... 시간쏟고 결론 안나는 상황 내가 제일 싫어하는 상황인데..
일단 내일 기술매니저님한테 물어보고, 해결해보아야겠다.

이 외에 삭제하는 기능은 `@DeleteMapping`을 사용하여 빠르게 구현하였고,
아쉬운건 삭제와 수정에 똑같이 비밀번호를 확인하는 기능이 들어가는데, 이부분을 따로 객체화 할 순 없나 생각하였다
과제를 제출해야해서 시도해보지는 못했지만,
분명 저렇게 간단한것들 말고 좀더 복잡한 기능들을 개발하려면 그런 기능들을 정의하는 클래스가 또 필요할텐데
어떤 패키지에 만들어야할까?

> 만약 비밀번호를 확인하는 부분을 분리한다면,
> 해당 클래스를 사용하는 메서드와 관련된 기능을 수행하는 service와 같은 패키지,
> 또는 util패키지와 같은 공통적으로 사용되는 패키지에 위치시키는것이 좋다.
> 이러한 패키지들은 비즈니스 로직을 처리하거나, 공통적으로 사용되는 유틸리티 클래스를 포함하는 패키지이므로,
> 해당 클래스를 서비스에서 쉽게 사용할 수 있으며, 필요한 경우 다른 클래스에서도 쉽게 재사용할 수 있다

`마무리`
하루종일 과제에만 매달렸다... 내일이 또 주특기 강화주차 발제인데...
나는 아직 부족한부분이 많아서 걱정이다.
이번에도 미리 개념들을 잡고가려고했다가 늦었다.
물론.... 그렇다고 해도 정리하는 시간이 필요하긴하다..

결국 그냥 시간이 좀 더 있었으면 좋겠다는거였다.

그제는 22시간 30분, 오늘은 23시간을 찍었다...학습시간을..
잠을 중간중간 자주었더니 괜찮긴한데, 약간 머리가 안돌아가는것 같은 기분이있고-.-;
시간이 훅 건너뛴것같은 기분도 있다.

내가 원하는건 잘돌아가는 머리 뿐만 아니라 물리적인 시간도 있으니 이틀에 한번에 자도 돼...
내일은 다음 주차를 시작하겠지만, 나는 이번주는 또 이번에 배운 부분들을 정리하는 방향으로 이번 주말을 보내야겠다.

어제오늘처럼 잠을 좀 덜잔다면 얼른 끝내고 빠르게 다음주차 수업을 들을 수 있겠지!!
